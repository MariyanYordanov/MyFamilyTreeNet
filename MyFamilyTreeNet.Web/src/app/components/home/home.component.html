<div class="container py-4">
  <!-- Hero Section -->
  <div class="hero-section text-center mb-5">
    <h1 class="display-4 mb-3">
      <i class="fas fa-sitemap text-primary me-3"></i>
      MyFamilyTreeNet
    </h1>
    <p class="lead text-muted mb-4">
      Създайте и споделете вашата семейна история
    </p>
    
  </div>

  <!-- Welcome message for logged users -->
  <div *ngIf="isLoggedIn && currentUser" class="alert alert-success" role="alert">
    <h5 class="alert-heading">
      <i class="fas fa-home me-2"></i>
      Добре дошли, {{currentUser.firstName}}!
    </h5>
    <p class="mb-0">Ето вашите семейства:</p>
  </div>

  <!-- Section Title -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>
      <i class="fas fa-users me-2"></i>
      <span *ngIf="isLoggedIn">Моите семейства</span>
      <span *ngIf="!isLoggedIn">Последни семейства</span>
    </h2>
    <a routerLink="/families/catalog" class="btn btn-outline-primary">
      <i class="fas fa-eye me-2"></i>
      <span *ngIf="isLoggedIn">Разгледай всички</span>
      <span *ngIf="!isLoggedIn">Виж всички</span>
    </a>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Зареждане...</span>
    </div>
    <p class="mt-2">Зареждане на семействата...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="alert alert-danger" role="alert">
    <i class="fas fa-exclamation-triangle me-2"></i>
    {{ error }}
    <button (click)="reloadFamilies()" class="btn btn-outline-danger btn-sm ms-3">
      <i class="fas fa-redo me-1"></i>
      Опитай отново
    </button>
  </div>

  <!-- Families Grid -->
  <div *ngIf="!isLoading && !error">
    <div class="row" *ngIf="families.length > 0">
      <div class="col-lg-4 col-md-6 mb-4" *ngFor="let family of families; trackBy: trackByFamilyId">
        <div class="card h-100 shadow-sm family-card">
          <!-- Family Image -->
          <div class="position-relative">
            <div class="card-img-top family-image d-flex align-items-center justify-content-center bg-light" 
                 *ngIf="!family.photoUrl">
              <i class="fas fa-users fa-3x text-muted"></i>
            </div>
            <img [src]="family.photoUrl" 
                 [alt]="family.name" 
                 class="card-img-top family-image"
                 *ngIf="family.photoUrl">
            <div class="card-img-overlay d-flex align-items-end">
              <h5 class="card-title text-white bg-dark bg-opacity-75 px-2 py-1 rounded">
                {{ family.name }}
              </h5>
            </div>
          </div>

          <!-- Family Info -->
          <div class="card-body">
            <p class="card-text text-muted" *ngIf="family.description">
              {{ family.description.length > 100 ? (family.description.substring(0, 100) + '...') : family.description }}
            </p>
            
            <!-- Family Stats -->
            <div class="row text-center mt-3">
              <div class="col-4">
                <small class="text-muted">Членове</small>
                <div class="fw-bold">{{ family.memberCount || 0 }}</div>
              </div>
              <div class="col-4">
                <small class="text-muted">Снимки</small>
                <div class="fw-bold">{{ (family.photos?.length) || 0 }}</div>
              </div>
              <div class="col-4">
                <small class="text-muted">Истории</small>
                <div class="fw-bold">{{ (family.stories?.length) || 0 }}</div>
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="card-footer bg-transparent">
            <div class="d-flex justify-content-between">
              <a [routerLink]="['/families', family.id]" class="btn btn-primary btn-sm">
                <i class="fas fa-eye me-1"></i>
                Разгледай
              </a>
              <a *ngIf="isLoggedIn" 
                 [routerLink]="['/families', family.id, 'edit']" 
                 class="btn btn-outline-secondary btn-sm">
                <i class="fas fa-edit me-1"></i>
                Редактирай
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- No families message -->
    <div *ngIf="families.length === 0" class="text-center py-5">
      <i class="fas fa-users fa-5x text-muted mb-4"></i>
      <h3 class="text-muted" *ngIf="isLoggedIn">Все още нямате семейства</h3>
      <h3 class="text-muted" *ngIf="!isLoggedIn">Няма налични семейства</h3>
      
      <p class="text-muted mb-4" *ngIf="isLoggedIn">
        Създайте вашето първо семейство и започнете да изграждате вашата семейна история.
      </p>
      <p class="text-muted mb-4" *ngIf="!isLoggedIn">
        Регистрирайте се, за да започнете да създавате вашата семейна история.
      </p>

      <a *ngIf="isLoggedIn" routerLink="/families/create" class="btn btn-primary">
        <i class="fas fa-plus me-2"></i>
        Създай семейство
      </a>
      <a *ngIf="!isLoggedIn" routerLink="/auth/register" class="btn btn-primary">
        <i class="fas fa-user-plus me-2"></i>
        Регистрация
      </a>
    </div>
  </div>

  <!-- Features Section for non-logged users -->
  <section *ngIf="!isLoggedIn" class="features-section mt-5 pt-5 border-top">
    <div class="row text-center">
      <div class="col-md-4 mb-4">
        <i class="fas fa-sitemap fa-3x text-primary mb-3"></i>
        <h5>Семейно дърво</h5>
        <p class="text-muted">Създайте интерактивно семейно дърво с визуализация на връзките между членовете.</p>
      </div>
      <div class="col-md-4 mb-4">
        <i class="fas fa-images fa-3x text-primary mb-3"></i>
        <h5>Снимки и спомени</h5>
        <p class="text-muted">Качвайте снимки и съхранявайте ценни семейни спомени.</p>
      </div>
      <div class="col-md-4 mb-4">
        <i class="fas fa-share-alt fa-3x text-primary mb-3"></i>
        <h5>Споделяне</h5>
        <p class="text-muted">Споделете вашата семейна история с роднини и приятели.</p>
      </div>
    </div>
  </section>
</div>